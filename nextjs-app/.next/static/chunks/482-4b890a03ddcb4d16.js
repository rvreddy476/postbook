"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{2482:(e,r,t)=>{t.d(r,{e:()=>S});var s=t(3365),a=t(9534),o=t.n(a),i=t(627),l=t(8558),n=t(2006),d=t(2285),c=t(105),u=t(3697),m=t(1647),x=t(4130),f=t(8005),h=t(7727),p=t(5712),g=t(3066);function b(){var e,r;let t=(0,i.usePathname)(),{toggleSidebar:a,isSidebarOpen:b}=(0,h.$)(),{user:v,logout:j}=(0,p.A)(),y=[{icon:l.A,label:"Reels",href:"/reels"},{icon:n.A,label:"Watch",href:"/watch"},{icon:d.A,label:"Messenger",href:"#",isAction:!0,action:a,active:b},{icon:c.A,label:"Notifications",href:"/notifications"}],N=v?"".concat((null==(e=v.firstName)?void 0:e[0])||"").concat((null==(r=v.lastName)?void 0:r[0])||"").toUpperCase():"U",w=v?"".concat(v.firstName," ").concat(v.lastName):"User";return(0,s.jsxs)("aside",{className:"hidden md:flex flex-col w-64 h-[calc(100vh-4rem)] sticky top-16 border-r border-border bg-card px-4 py-6 z-40",children:[(0,s.jsxs)(o(),{href:"/profile",className:"flex items-center gap-3 p-3 mb-6 rounded-xl hover:bg-muted transition-all cursor-pointer group border border-transparent hover:border-border/50","data-testid":"link-profile",children:[(0,s.jsx)(g.eu,{className:"h-12 w-12 border-2 border-primary/20 group-hover:border-primary transition-colors",children:(0,s.jsx)(g.q5,{className:"bg-primary/10 text-primary font-semibold",children:N})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-heading font-bold text-base text-foreground group-hover:text-primary transition-colors","data-testid":"text-username",children:w}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"View Profile"})]})]}),(0,s.jsx)("nav",{className:"flex-1 space-y-2",children:y.map(e=>{let r=e.icon,a=void 0!==e.active?e.active:t===e.href;return e.isAction?(0,s.jsxs)("button",{onClick:r=>{r.preventDefault(),e.action&&e.action()},className:(0,x.cn)("w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium cursor-pointer",a?"bg-primary/10 text-primary font-semibold":"text-muted-foreground hover:bg-muted hover:text-foreground"),"data-testid":"button-".concat(e.label.toLowerCase()),children:[(0,s.jsx)(r,{size:24,strokeWidth:a?2.5:2}),e.label]},e.label):(0,s.jsxs)(o(),{href:e.href,className:(0,x.cn)("flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium",a?"bg-primary/10 text-primary font-semibold":"text-muted-foreground hover:bg-muted hover:text-foreground"),"data-testid":"link-".concat(e.label.toLowerCase()),children:[(0,s.jsx)(r,{size:24,strokeWidth:a?2.5:2}),e.label]},e.href)})}),(0,s.jsxs)("div",{className:"pt-4 border-t border-border space-y-2",children:[(0,s.jsxs)(o(),{href:"/settings",className:"flex items-center gap-3 px-4 py-3 rounded-xl text-muted-foreground hover:bg-muted hover:text-foreground transition-all font-medium","data-testid":"link-settings",children:[(0,s.jsx)(u.A,{size:24}),"Settings"]}),(0,s.jsxs)(f.$,{variant:"ghost",className:"w-full justify-start gap-3 px-4 py-6 rounded-xl text-destructive hover:text-destructive hover:bg-destructive/10",onClick:j,"data-testid":"button-logout",children:[(0,s.jsx)(m.A,{size:24}),"Logout"]})]})]})}var v=t(5e3),j=t(7931);function y(){let e=(0,i.usePathname)(),{toggleSidebar:r,isSidebarOpen:t}=(0,h.$)(),a=[{icon:v.A,label:"Home",href:"/feed"},{icon:l.A,label:"Reels",href:"/reels"},{icon:n.A,label:"Watch",href:"/watch"},{icon:d.A,label:"Messenger",href:"#",isAction:!0,action:r,active:t},{icon:j.A,label:"Profile",href:"/profile"}];return(0,s.jsx)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 pb-safe",children:(0,s.jsx)("nav",{className:"flex justify-around items-center h-16 px-2",children:a.map(r=>{let t=r.icon,a=void 0!==r.active?r.active:e===r.href;return r.isAction?(0,s.jsxs)("button",{onClick:e=>{e.preventDefault(),r.action&&r.action()},className:(0,x.cn)("flex flex-col items-center justify-center w-full h-full gap-1 transition-colors",a?"text-primary":"text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(t,{size:24,strokeWidth:a?2.5:2}),(0,s.jsx)("span",{className:"text-[10px] font-medium",children:r.label})]},r.label):(0,s.jsxs)(o(),{href:r.href,className:(0,x.cn)("flex flex-col items-center justify-center w-full h-full gap-1 transition-colors",a?"text-primary":"text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(t,{size:24,strokeWidth:a?2.5:2}),(0,s.jsx)("span",{className:"text-[10px] font-medium",children:r.label})]},r.href)})})})}function N(){return(0,s.jsxs)("aside",{className:"hidden lg:flex flex-col w-80 h-[calc(100vh-4rem)] sticky top-16 border-l border-border bg-card px-6 py-6 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-heading font-semibold text-lg text-muted-foreground text-xs uppercase tracking-wider",children:"Sponsored"}),(0,s.jsxs)("div",{className:"rounded-xl overflow-hidden border border-border group cursor-pointer relative",children:[(0,s.jsx)("img",{src:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=600&q=80",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-500",alt:"Ad"}),(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 text-white",children:[(0,s.jsx)("p",{className:"font-bold text-sm",children:"Nike Air Max"}),(0,s.jsx)("p",{className:"text-xs opacity-80",children:"Just Do It."})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-heading font-semibold text-lg",children:"Trending Now"}),(0,s.jsx)("div",{className:"space-y-4",children:["#TechInnovation","Photography","WorldCup2026","AIArt"].map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center group cursor-pointer",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium group-hover:text-primary transition-colors",children:e}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"12.5k Posts"})]}),(0,s.jsx)(f.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:"+"})]},e))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-heading font-semibold text-lg",children:"Who to follow"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g.eu,{children:(0,s.jsx)(g.q5,{children:"SJ"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Sarah Jenkins"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"@sarahj_design"})]})]}),(0,s.jsx)(f.$,{size:"sm",variant:"outline",className:"h-8 text-xs rounded-full hover:bg-primary hover:text-primary-foreground hover:border-primary",children:"Follow"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g.eu,{children:(0,s.jsx)(g.q5,{children:"MK"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Mike Kogan"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"@mikek_dev"})]})]}),(0,s.jsx)(f.$,{size:"sm",variant:"outline",className:"h-8 text-xs rounded-full hover:bg-primary hover:text-primary-foreground hover:border-primary",children:"Follow"})]})]})]})]})}var w=t(1521),k=t(3155),A=t(6296),z=t(5663);function S(e){let{children:r,showRightSidebar:t=!0}=e,{closeSidebar:a,toggleSidebar:u,isSidebarOpen:m}=(0,h.$)(),x=(0,i.usePathname)();return(0,w.useEffect)(()=>{a()},[x,a]),(0,s.jsxs)("div",{className:"min-h-screen bg-background text-foreground flex flex-col font-sans relative",children:[(0,s.jsx)("header",{className:"w-full border-b border-border/40 bg-background/80 backdrop-blur-md sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between gap-4",children:[(0,s.jsxs)(o(),{href:"/feed",className:"flex items-center gap-2 w-auto md:w-64 shrink-0 cursor-pointer",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-primary-foreground font-bold text-xl",children:"P"})}),(0,s.jsx)("h1",{className:"text-2xl font-heading font-bold text-primary hidden md:block",children:"PostBook"})]}),(0,s.jsxs)("div",{className:"flex-1 max-w-md relative hidden sm:block",children:[(0,s.jsx)(A.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(k.p,{placeholder:"Search PostBook...",className:"pl-10 bg-muted/50 border-none focus-visible:ring-primary/20 rounded-full"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 justify-end flex-1 md:flex-none",children:[(0,s.jsx)(f.$,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-primary/10 hover:text-primary ".concat(m?"bg-primary/10 text-primary":"text-muted-foreground"),onClick:u,children:(0,s.jsx)(d.A,{size:22})}),(0,s.jsx)(o(),{href:"/reels",children:(0,s.jsx)(f.$,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-primary/10 hover:text-primary ".concat("/reels"===x?"bg-primary/10 text-primary":"text-muted-foreground"),children:(0,s.jsx)(l.A,{size:22})})}),(0,s.jsx)(o(),{href:"/watch",children:(0,s.jsx)(f.$,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-primary/10 hover:text-primary ".concat("/watch"===x?"bg-primary/10 text-primary":"text-muted-foreground"),children:(0,s.jsx)(n.A,{size:22})})}),(0,s.jsxs)(f.$,{variant:"ghost",className:"hidden md:flex items-center gap-2 text-destructive hover:text-destructive hover:bg-destructive/10 rounded-full px-3",children:[(0,s.jsx)(z.A,{size:22}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:"GO LIVE"})]}),(0,s.jsx)(f.$,{variant:"ghost",size:"icon",className:"md:hidden text-destructive hover:text-destructive hover:bg-destructive/10 rounded-full",children:(0,s.jsx)(z.A,{size:22})}),(0,s.jsx)(o(),{href:"/notifications",children:(0,s.jsx)(f.$,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-primary/10 hover:text-primary ".concat("/notifications"===x?"bg-primary/10 text-primary":"text-muted-foreground"),children:(0,s.jsx)(c.A,{size:22})})})]})]})}),(0,s.jsxs)("div",{className:"flex flex-1 max-w-[1600px] mx-auto w-full",children:["/profile"!==x&&(0,s.jsx)(b,{}),(0,s.jsx)("main",{className:"flex-1 min-w-0 pb-20 md:pb-0 pt-4",children:(0,s.jsx)("div",{className:"mx-auto w-full ".concat("/profile"===x?"max-w-[85%]":"max-w-2xl"),children:r})}),t&&"/profile"!==x&&(0,s.jsx)(N,{}),(0,s.jsx)(y,{})]})]})}},3066:(e,r,t)=>{t.d(r,{BK:()=>n,eu:()=>l,q5:()=>d});var s=t(3365),a=t(1521),o=t(4549),i=t(4130);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(o.bL,{ref:r,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a})});l.displayName=o.bL.displayName;let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(o._V,{ref:r,className:(0,i.cn)("aspect-square h-full w-full",t),...a})});n.displayName=o._V.displayName;let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(o.H4,{ref:r,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a})});d.displayName=o.H4.displayName},3155:(e,r,t)=>{t.d(r,{p:()=>i});var s=t(3365),a=t(1521),o=t(4130);let i=a.forwardRef((e,r)=>{let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...i})});i.displayName="Input"},4130:(e,r,t)=>{t.d(r,{cn:()=>o});var s=t(4584),a=t(2292);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},5712:(e,r,t)=>{t.d(r,{A:()=>c,O:()=>d});var s=t(3365),a=t(1521),o=t(627);let i=(0,a.createContext)(void 0),l="postbook_token",n="postbook_user";function d(e){let{children:r}=e,[t,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0),f=(0,o.useRouter)(),h=!!c&&!!t;(0,a.useEffect)(()=>{let e=localStorage.getItem(l),r=localStorage.getItem(n);e&&r&&(u(e),d(JSON.parse(r))),x(!1)},[]);let p=(0,a.useCallback)(async(e,r)=>{x(!0);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrPhone:e,password:r})});if(!t.ok){let e=await t.json();throw Error(e.message||"Login failed")}let s=await t.json();u(s.token),d(s.user),localStorage.setItem(l,s.token),localStorage.setItem(n,JSON.stringify(s.user)),f.push("/feed")}finally{x(!1)}},[f]),g=(0,a.useCallback)(async e=>{x(!0);try{let r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();throw Error(e.message||"Registration failed")}let t=await r.json();u(t.token),d(t.user),localStorage.setItem(l,t.token),localStorage.setItem(n,JSON.stringify(t.user)),f.push("/feed")}finally{x(!1)}},[f]),b=(0,a.useCallback)(()=>{u(null),d(null),localStorage.removeItem(l),localStorage.removeItem(n),f.push("/")},[f]);return(0,a.useEffect)(()=>{(async()=>{if(c)try{(await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(c)}})).ok||b()}catch(e){b()}})()},[c,b]),(0,s.jsx)(i.Provider,{value:{user:t,token:c,isLoading:m,isAuthenticated:h,login:p,register:g,logout:b},children:r})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7727:(e,r,t)=>{t.d(r,{$:()=>l,F:()=>i});var s=t(3365),a=t(1521);let o=(0,a.createContext)(void 0);function i(e){let{children:r}=e,[t,i]=(0,a.useState)(!1),[l,n]=(0,a.useState)([]);return(0,s.jsx)(o.Provider,{value:{isSidebarOpen:t,toggleSidebar:()=>i(e=>!e),closeSidebar:()=>i(!1),activeChats:l,openChat:e=>{l.find(r=>r.id===e.id)||n(r=>{let t=[...r,e];return t.length>2?t.slice(t.length-2):t})},closeChat:e=>{n(r=>r.filter(r=>r.id!==e))}},children:r})}function l(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useMessenger must be used within a MessengerProvider");return e}},8005:(e,r,t)=>{t.d(r,{$:()=>d});var s=t(3365),a=t(1521),o=t(544),i=t(2934),l=t(4130);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground shadow-sm border-destructive-border",outline:" border [border-color:var(--button-outline)] shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent",link:"text-primary underline-offset-4 hover:underline"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:d=!1,...c}=e,u=d?o.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(n({variant:a,size:i,className:t})),ref:r,...c})});d.displayName="Button"}}]);