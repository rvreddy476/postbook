(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{4292:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>X});var s=t(3365),r=t(1521),l=t(2482),i=t(3066),n=t(8005),o=t(8159),d=t(4130);let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:(0,d.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...r})});c.displayName="Textarea";var m=t(8224),x=t(2196);let u=m.bL,h=m.l9,f=m.ZL;m.bm;let p=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(m.hJ,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});p.displayName=m.hJ.displayName;let g=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(f,{children:[(0,s.jsx)(p,{}),(0,s.jsxs)(m.UC,{ref:a,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,s.jsxs)(m.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=m.UC.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(m.hE,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})}).displayName=m.hE.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(m.VY,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",t),...r})}).displayName=m.VY.displayName;var b=t(4361);let j=r.forwardRef((e,a)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...i}=e;return(0,s.jsx)(b.b,{ref:a,decorative:l,orientation:r,className:(0,d.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...i})});j.displayName=b.b.displayName;var v=t(3921);let N=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(v.bL,{ref:a,className:(0,d.cn)("relative overflow-hidden",t),...l,children:[(0,s.jsx)(v.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(y,{}),(0,s.jsx)(v.OK,{})]})});N.displayName=v.bL.displayName;let y=r.forwardRef((e,a)=>{let{className:t,orientation:r="vertical",...l}=e;return(0,s.jsx)(v.VM,{ref:a,orientation:r,className:(0,d.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...l,children:(0,s.jsx)(v.lr,{className:"relative flex-1 rounded-full bg-border"})})});y.displayName=v.VM.displayName;var w=t(5561),k=t(3155),C=t(6281),z=t(3836),A=t(4280),R=t(2839),S=t(8096),P=t(3757),U=t(8626),L=t(8121),$=t(5663),D=t(6713),B=t(5712);let T=[{emoji:"\uD83D\uDE42",label:"Happy"},{emoji:"\uD83E\uDD70",label:"Loved"},{emoji:"\uD83D\uDE0E",label:"Cool"},{emoji:"\uD83E\uDD29",label:"Excited"},{emoji:"\uD83E\uDD2A",label:"Crazy"},{emoji:"\uD83D\uDE34",label:"Tired"}],F=[{id:"default",bg:"bg-white dark:bg-card text-foreground"},{id:"red",bg:"bg-gradient-to-br from-red-500 to-pink-600 text-white"},{id:"blue",bg:"bg-gradient-to-br from-blue-400 to-cyan-500 text-white"},{id:"green",bg:"bg-gradient-to-br from-emerald-400 to-green-600 text-white"},{id:"purple",bg:"bg-gradient-to-br from-purple-500 to-indigo-600 text-white"},{id:"orange",bg:"bg-gradient-to-br from-orange-400 to-amber-500 text-white"},{id:"tea",bg:"bg-[#C0BBB1] text-slate-900"},{id:"chill",bg:"bg-[#148290] text-white"}];function W(e){var a,t;let{onPostCreated:l}=e,{user:d}=(0,B.A)(),[m,f]=(0,r.useState)(!1),[p,b]=(0,r.useState)(""),[v,y]=(0,r.useState)("compose"),[W,V]=(0,r.useState)(F[0]),[E,O]=(0,r.useState)(["",""]),[J,_]=(0,r.useState)(null),[H,K]=(0,r.useState)(!1),[Z,I]=(0,r.useState)(null),[G,X]=(0,r.useState)("image"),Y=(0,r.useRef)(null),Q=d?"".concat((null==(a=d.firstName)?void 0:a[0])||"").concat((null==(t=d.lastName)?void 0:t[0])||"").toUpperCase():"U",ee=d?"".concat(d.firstName," ").concat(d.lastName):"User",ea=()=>{b(""),y("compose"),V(F[0]),O(["",""]),_(null),I(null),f(!1)},et=async()=>{if(d&&(p||Z)){K(!0);try{(await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authorId:d.id,content:p,imageUrl:Z,backgroundColor:"default"!==W.id?W.id:null,feeling:J?"".concat(J.emoji," ").concat(J.label):null})})).ok&&(ea(),null==l||l())}catch(e){console.error("Failed to create post:",e)}finally{K(!1)}}};return(0,s.jsx)(o.Zp,{className:"shadow-md border-none overflow-hidden bg-card/50 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,s.jsx)(i.eu,{className:"h-12 w-12 cursor-pointer ring-2 ring-primary/10 hover:ring-primary/30 transition-all",children:(0,s.jsx)(i.q5,{className:"bg-primary/10 text-primary font-semibold",children:Q})}),(0,s.jsxs)(u,{open:m,onOpenChange:f,children:[(0,s.jsx)(h,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex-1 bg-muted/40 hover:bg-muted/60 transition-all duration-300 rounded-2xl px-5 py-3 text-muted-foreground cursor-pointer text-left shadow-inner flex items-center justify-between group",onClick:()=>{f(!0),y("compose")},"data-testid":"button-create-post",children:[(0,s.jsxs)("span",{children:["What's on your mind, ",(null==d?void 0:d.firstName)||"there","?"]}),(0,s.jsxs)("div",{className:"flex gap-2 opacity-50 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)(C.A,{size:18}),(0,s.jsx)(z.A,{size:18})]})]})}),(0,s.jsxs)(g,{className:"max-w-3xl p-0 gap-0 overflow-hidden border-none shadow-2xl bg-card max-h-[85vh] h-[500px] flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b flex justify-between items-center bg-muted/10",children:[(0,s.jsx)("h2",{className:"text-lg font-bold font-heading",children:"Create Post"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",children:"Drafts"}),(0,s.jsx)(n.$,{className:"bg-primary hover:bg-primary/90 text-primary-foreground px-6 rounded-full font-semibold shadow-lg shadow-primary/20",onClick:et,disabled:!p&&!Z&&!J||H,"data-testid":"button-submit-post",children:H?"Posting...":"Post"})]})]}),(0,s.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,s.jsxs)(w.tU,{defaultValue:"compose",value:v,onValueChange:y,orientation:"vertical",className:"w-[200px] bg-muted/20 border-r flex flex-col",children:[(0,s.jsxs)(w.j7,{className:"flex flex-col h-auto bg-transparent p-2 gap-1 justify-start w-full",children:[(0,s.jsx)(q,{value:"compose",icon:(0,s.jsx)(A.A,{size:18}),label:"Compose"}),(0,s.jsx)(q,{value:"media",icon:(0,s.jsx)(C.A,{size:18}),label:"Photo/Video"}),(0,s.jsx)(q,{value:"poll",icon:(0,s.jsx)(R.A,{size:18}),label:"Poll"}),(0,s.jsx)(q,{value:"feeling",icon:(0,s.jsx)(z.A,{size:18}),label:"Feeling"}),(0,s.jsx)(q,{value:"checkin",icon:(0,s.jsx)(S.A,{size:18}),label:"Check In"}),(0,s.jsx)(j,{className:"my-2"}),(0,s.jsx)(q,{value:"background",icon:(0,s.jsx)(P.A,{size:18}),label:"Background"}),(0,s.jsx)(q,{value:"gif",icon:(0,s.jsx)(U.A,{size:18}),label:"GIF"})]}),(0,s.jsx)("div",{className:"mt-auto p-4",children:(0,s.jsx)("div",{className:"bg-primary/5 rounded-xl p-3 text-xs text-muted-foreground text-center",children:(0,s.jsx)("p",{children:"Share with Public"})})})]}),(0,s.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden relative bg-background",children:(0,s.jsxs)(N,{className:"flex-1 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(i.eu,{className:"h-10 w-10",children:(0,s.jsx)(i.q5,{className:"bg-primary/10 text-primary",children:Q})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-sm",children:ee}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsx)(L.A,{size:12})," Public",J&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{className:"font-medium text-primary flex items-center gap-1",children:[J.emoji," feeling ",J.label]})]})]})]})]}),(0,s.jsx)("div",{className:"min-h-[200px] transition-all duration-500 rounded-xl ".concat("default"!==W.id?"p-8 flex items-center justify-center text-center shadow-inner ".concat(W.bg):""),children:(0,s.jsx)(c,{value:p,onChange:e=>b(e.target.value),placeholder:"What's on your mind?",className:"border-none shadow-none resize-none focus-visible:ring-0 p-0 text-xl leading-relaxed bg-transparent ".concat("default"!==W.id?"text-white text-center font-bold text-3xl placeholder:text-white/60":"placeholder:text-muted-foreground/40"),"data-testid":"input-post-content"})}),Z&&(0,s.jsxs)("div",{className:"mt-4 relative rounded-xl overflow-hidden border bg-black/5 group",children:[(0,s.jsx)(n.$,{size:"icon",variant:"secondary",className:"absolute top-2 right-2 h-8 w-8 rounded-full bg-black/60 text-white hover:bg-black/80 opacity-0 group-hover:opacity-100 transition-opacity z-10",onClick:()=>I(null),children:(0,s.jsx)(x.A,{size:14})}),"image"===G?(0,s.jsx)("img",{src:Z,alt:"Preview",className:"w-full max-h-[300px] object-contain"}):(0,s.jsx)("video",{src:Z,controls:!0,className:"w-full max-h-[300px]"})]}),"poll"===v&&(0,s.jsxs)("div",{className:"mt-6 border rounded-xl p-4 bg-muted/10 animate-in fade-in slide-in-from-bottom-4",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,s.jsx)(R.A,{size:18,className:"text-primary"})," Poll Details"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[E.map((e,a)=>(0,s.jsx)(k.p,{placeholder:"Option ".concat(a+1),value:e,onChange:e=>{let t=[...E];t[a]=e.target.value,O(t)}},a)),(0,s.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>O([...E,""]),className:"w-full border-dashed",children:"+ Add Option"})]})]}),"media"===v&&!Z&&(0,s.jsxs)("div",{className:"mt-6 border-2 border-dashed rounded-xl p-8 text-center hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>{var e;return null==(e=Y.current)?void 0:e.click()},children:[(0,s.jsx)("input",{type:"file",ref:Y,className:"hidden",accept:"image/*,video/*",onChange:e=>{var a;let t=null==(a=e.target.files)?void 0:a[0];t&&(I(URL.createObjectURL(t)),X(t.type.startsWith("video")?"video":"image"))}}),(0,s.jsx)("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-3",children:(0,s.jsx)(C.A,{size:24})}),(0,s.jsx)("p",{className:"font-medium",children:"Add Photos or Videos"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"or drag and drop"})]}),"feeling"===v&&(0,s.jsx)("div",{className:"mt-6 grid grid-cols-3 gap-2 animate-in fade-in slide-in-from-bottom-4",children:T.map(e=>(0,s.jsxs)(n.$,{variant:"ghost",className:"justify-start h-auto py-3",onClick:()=>{_(e),y("compose")},children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:e.emoji})," ",e.label]},e.label))}),"background"===v&&(0,s.jsxs)("div",{className:"mt-6 animate-in fade-in slide-in-from-bottom-4",children:[(0,s.jsx)("h3",{className:"font-semibold mb-3 text-sm text-muted-foreground uppercase tracking-wider",children:"Choose Background"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-3",children:F.map(e=>(0,s.jsx)("div",{className:"aspect-square rounded-xl cursor-pointer ring-2 ring-offset-2 transition-all ".concat(e.bg," ").concat(W.id===e.id?"ring-primary scale-95":"ring-transparent hover:scale-105"),onClick:()=>{V(e),y("compose")}},e.id))})]})]})})]})]})]})]}),(0,s.jsx)(j,{className:"mb-3 opacity-50"}),(0,s.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,s.jsx)(M,{icon:(0,s.jsx)($.A,{className:"text-red-500",size:20}),label:"Live Video",onClick:()=>{f(!0),y("compose")}}),(0,s.jsx)(M,{icon:(0,s.jsx)(C.A,{className:"text-green-500",size:20}),label:"Photo/Video",onClick:()=>{f(!0),y("media"),setTimeout(()=>{var e;return null==(e=Y.current)?void 0:e.click()},100)}}),(0,s.jsx)(M,{icon:(0,s.jsx)(D.A,{className:"text-yellow-500",size:20}),label:"Feeling/Activity",onClick:()=>{f(!0),y("feeling")}})]})]})})}function q(e){let{value:a,icon:t,label:r}=e;return(0,s.jsxs)(w.Xi,{value:a,className:"w-full justify-start gap-3 px-4 py-3 data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-lg transition-all",children:[t,(0,s.jsx)("span",{children:r})]})}function M(e){let{icon:a,label:t,onClick:r}=e;return(0,s.jsxs)(n.$,{variant:"ghost",className:"flex-1 text-muted-foreground hover:bg-muted/50 hover:text-foreground gap-2 h-auto py-2.5 rounded-xl transition-all hover:scale-[1.02]",onClick:r,children:[a,(0,s.jsx)("span",{className:"font-medium text-sm text-foreground/80",children:t})]})}var V=t(5515),E=t(5852),O=t(7882),J=t(6552),_=t(6464),H=t(2446);function K(e){let{author:a,content:t,image:l,time:c}=e,[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(3),[j,v]=(0,r.useState)(""),[y,w]=(0,r.useState)(null),[A,R]=(0,r.useState)(""),S=(0,r.useRef)(null),[P,U]=(0,r.useState)([{id:1,name:"Jane Cooper",role:"Product Designer",text:"This is amazing!",time:"2m ago",avatar:"",likes:4},{id:2,name:"Wade Warren",role:"Frontend Dev",text:"Love the colors in this.",time:"5m ago",avatar:"",likes:1},{id:3,name:"Esther Howard",role:"Project Manager",text:"Can't wait to see more updates.",time:"12m ago",avatar:"",likes:0},{id:4,name:"Cameron Williamson",role:"Marketing",text:"Great work on this!",time:"15m ago",avatar:"",likes:2},{id:5,name:"Jenny Wilson",role:"Developer",text:"Looks fantastic",time:"18m ago",avatar:"",likes:3}]),L=(e,a)=>{if(e.preventDefault(),!A.trim())return;let t={id:Date.now(),name:"User",role:"Member",text:A,time:"Just now",avatar:"",likes:0};U(e=>e.map(e=>e.id===a?{...e,replies:[...e.replies||[],t]}:e)),R(""),w(null)};return(0,s.jsxs)(o.Zp,{className:"border-none shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden bg-card",children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-4 p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(i.eu,{className:"h-10 w-10 border border-border cursor-pointer",children:[(0,s.jsx)(i.BK,{src:a.avatar,alt:a.name}),(0,s.jsx)(i.q5,{children:a.name[0]})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"font-semibold text-sm hover:underline cursor-pointer",children:a.name}),(0,s.jsxs)("span",{className:"text-muted-foreground text-xs",children:["• ",c]})]}),(0,s.jsxs)("span",{className:"text-muted-foreground text-xs",children:["@",a.handle]})]})]}),(0,s.jsx)(n.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground",children:(0,s.jsx)(V.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)(o.Wu,{className:"p-0",children:[t&&(0,s.jsx)("p",{className:"px-5 pb-4 text-sm leading-relaxed whitespace-pre-wrap",children:t}),l&&(0,s.jsx)("div",{className:"relative aspect-video w-full overflow-hidden bg-muted cursor-pointer",children:(0,s.jsx)("img",{src:l,alt:"Post content",className:"object-cover w-full h-full hover:scale-[1.01] transition-transform duration-500"})})]}),(0,s.jsxs)(o.wL,{className:"p-3 flex flex-col gap-3 border-t border-border/50 bg-card/50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between w-full px-4",children:[(0,s.jsx)(n.$,{variant:"ghost",size:"icon",className:(0,d.cn)("rounded-full hover:bg-red-50 hover:text-red-500 transition-colors",m&&"text-red-500"),onClick:()=>x(!m),children:(0,s.jsx)(E.A,{className:(0,d.cn)("h-6 w-6",m&&"fill-current")})}),(0,s.jsx)(n.$,{variant:"ghost",size:"icon",className:(0,d.cn)("rounded-full hover:bg-primary/5 hover:text-primary transition-colors",f&&"text-primary bg-primary/5"),onClick:()=>p(!f),children:(0,s.jsx)(O.A,{className:"h-6 w-6"})}),(0,s.jsx)(n.$,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-primary/5 hover:text-primary transition-colors",children:(0,s.jsx)(J.A,{className:"h-6 w-6"})}),(0,s.jsx)(n.$,{variant:"ghost",size:"icon",className:(0,d.cn)("rounded-full hover:bg-primary/5 hover:text-primary transition-colors",u&&"text-primary fill-current"),onClick:()=>h(!u),children:(0,s.jsx)(_.A,{className:(0,d.cn)("h-6 w-6",u&&"fill-current")})})]}),f&&(0,s.jsxs)("div",{className:"w-full pt-2 animate-in slide-in-from-top-2 duration-200",children:[(0,s.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,s.jsx)(i.eu,{className:"h-8 w-8 shrink-0",children:(0,s.jsx)(i.q5,{children:"U"})}),(0,s.jsx)("div",{className:"flex-1 relative",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j.trim()&&(U([...P,{id:Date.now(),name:"User",role:"Member",text:j,time:"Just now",avatar:"",likes:0}]),v(""),P.length>=g&&b(e=>e+1))},className:"relative",children:[(0,s.jsx)(k.p,{placeholder:"Add a comment...",className:"pr-20 h-10 rounded-full bg-muted/30 border-muted-foreground/20 focus-visible:ring-primary/20",value:j,onChange:e=>v(e.target.value)}),(0,s.jsxs)("div",{className:"absolute right-1.5 top-1.5 flex items-center gap-1",children:[(0,s.jsx)(n.$,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground rounded-full",children:(0,s.jsx)(z.A,{size:16})}),(0,s.jsx)(n.$,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground rounded-full",children:(0,s.jsx)(C.A,{size:16})})]})]})})]}),(0,s.jsx)(N,{className:"max-h-[300px] pr-4 -mr-4",children:(0,s.jsxs)("div",{className:"space-y-3 pl-11 pb-2",children:[P.slice(0,g).map(e=>(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-3 group",children:[(0,s.jsxs)(i.eu,{className:"h-8 w-8 shrink-0 border border-border",children:[(0,s.jsx)(i.BK,{src:e.avatar}),(0,s.jsx)(i.q5,{className:"text-xs bg-muted text-muted-foreground",children:e.name[0]})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"bg-muted/30 rounded-xl p-2.5 relative",children:[(0,s.jsxs)("div",{className:"flex items-baseline justify-between mb-0.5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-foreground mr-2 cursor-pointer hover:underline",children:e.name}),e.role&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground hidden sm:inline-block",children:["• ",e.role]})]}),(0,s.jsx)("span",{className:"text-[10px] text-muted-foreground",children:e.time})]}),(0,s.jsx)("p",{className:"text-sm text-foreground/90 leading-relaxed",children:e.text})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-1 ml-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsxs)("button",{className:"text-[10px] font-medium text-muted-foreground hover:text-primary transition-colors flex items-center gap-1",children:["Like ",e.likes>0&&"(".concat(e.likes,")")]})}),(0,s.jsx)("button",{className:"text-[10px] font-medium text-muted-foreground hover:text-primary transition-colors",onClick:()=>w(y===e.id?null:e.id),children:"Reply"})]}),y===e.id&&(0,s.jsx)("div",{className:"mt-2 animate-in fade-in slide-in-from-top-1 duration-200",children:(0,s.jsxs)("form",{onSubmit:a=>L(a,e.id),className:"flex gap-2",children:[(0,s.jsx)(k.p,{autoFocus:!0,placeholder:"Reply to ".concat(e.name,"..."),className:"h-8 text-xs bg-muted/30 rounded-full",value:A,onChange:e=>R(e.target.value)}),(0,s.jsx)(n.$,{type:"submit",size:"sm",className:"h-8 rounded-full px-3",disabled:!A.trim(),children:"Reply"})]})})]})]}),e.replies&&e.replies.length>0&&(0,s.jsx)("div",{className:"pl-11 space-y-2",children:e.replies.map(e=>(0,s.jsxs)("div",{className:"flex gap-3 group",children:[(0,s.jsxs)(i.eu,{className:"h-6 w-6 shrink-0 border border-border",children:[(0,s.jsx)(i.BK,{src:e.avatar}),(0,s.jsx)(i.q5,{className:"text-[10px] bg-muted text-muted-foreground",children:e.name[0]})]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"bg-muted/20 rounded-xl p-2 relative",children:[(0,s.jsxs)("div",{className:"flex items-baseline justify-between mb-0.5",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-foreground mr-2",children:e.name}),(0,s.jsx)("span",{className:"text-[10px] text-muted-foreground",children:e.time})]}),(0,s.jsx)("p",{className:"text-xs text-foreground/90 leading-relaxed",children:e.text})]})})]},e.id))})]},e.id)),g<P.length&&(0,s.jsx)("div",{className:"pl-11 pt-1",children:(0,s.jsxs)(n.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground text-xs font-medium h-auto py-1 px-2",onClick:()=>{b(e=>e+3),setTimeout(()=>{if(S.current){let e=S.current.querySelector("[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}},100)},children:["Load more comments ",(0,s.jsx)(H.A,{size:12,className:"ml-1"})]})})]})})]})]})]})}function Z(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("animate-pulse rounded-md bg-primary/10",a),...t})}var I=t(627);let G=[{id:"default-1",author:{name:"PostBook Team",handle:"postbook",avatar:""},content:"Welcome to PostBook! We're excited to have you here. Start sharing your moments today.",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=800&q=80",likes:5e3,comments:1200,time:"1d ago"},{id:"default-2",author:{name:"PostBook",handle:"postbook_official",avatar:""},content:"Discover what's happening around you. Connect with friends, share your thoughts, and explore new content.",image:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?auto=format&fit=crop&w=800&q=80",likes:856,comments:42,time:"2d ago"}];function X(){let{user:e,isAuthenticated:a,isLoading:t}=(0,B.A)(),i=(0,I.useRouter)(),[n,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{t||a||i.push("/")},[t,a,i]);let m=async()=>{try{let e=await fetch("/api/posts");if(e.ok){let a=await e.json();o(a)}}catch(e){console.error("Failed to fetch posts:",e)}finally{c(!1)}};return((0,r.useEffect)(()=>{a&&m()},[a]),t)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a?(0,s.jsx)(l.e,{children:(0,s.jsxs)("div",{className:"space-y-6 py-6",children:[(0,s.jsx)(W,{onPostCreated:()=>{m()}}),(0,s.jsx)("div",{className:"space-y-6",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Y,{}),(0,s.jsx)(Y,{})]}):(0,s.jsxs)(s.Fragment,{children:[n.map(e=>{var a,t;return(0,s.jsx)(K,{id:e.id,author:{name:e.author?"".concat(e.author.firstName||""," ").concat(e.author.lastName||"").trim()||e.author.username:"Unknown User",handle:(null==(a=e.author)?void 0:a.username)||"user",avatar:(null==(t=e.author)?void 0:t.avatarUrl)||""},content:e.content,image:e.imageUrl||void 0,likes:e.likesCount,comments:e.commentsCount,time:function(e){let a=new Date(e),t=Math.floor((new Date().getTime()-a.getTime())/6e4),s=Math.floor(t/60),r=Math.floor(s/24);return t<1?"Just now":t<60?"".concat(t,"m ago"):s<24?"".concat(s,"h ago"):r<7?"".concat(r,"d ago"):a.toLocaleDateString()}(e.createdAt),backgroundColor:e.backgroundColor,feeling:e.feeling},e.id)}),G.map(e=>(0,s.jsx)(K,{id:e.id,author:e.author,content:e.content,image:e.image,likes:e.likes,comments:e.comments,time:e.time},e.id))]})})]})}):null}function Y(){return(0,s.jsxs)("div",{className:"bg-card rounded-lg p-5 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(Z,{className:"h-10 w-10 rounded-full"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(Z,{className:"h-4 w-32"}),(0,s.jsx)(Z,{className:"h-3 w-20"})]})]}),(0,s.jsx)(Z,{className:"h-20 w-full"}),(0,s.jsx)(Z,{className:"h-48 w-full rounded-lg"})]})}},5561:(e,a,t)=>{"use strict";t.d(a,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>n});var s=t(3365),r=t(1521),l=t(6275),i=t(4130);let n=l.bL,o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.B8,{ref:a,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...r})});o.displayName=l.B8.displayName;let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.l9,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...r})});d.displayName=l.l9.displayName;let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.UC,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});c.displayName=l.UC.displayName},7479:(e,a,t)=>{Promise.resolve().then(t.bind(t,4292))},8159:(e,a,t)=>{"use strict";t.d(a,{Wu:()=>o,Zp:()=>i,aR:()=>n,wL:()=>d});var s=t(3365),r=t(1521),l=t(4130);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});i.displayName="Card";let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});n.displayName="CardHeader",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",t),...r})}).displayName="CardTitle",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})});d.displayName="CardFooter"}},e=>{var a=a=>e(e.s=a);e.O(0,[436,17,955,844,219,482,347,870,358],()=>a(7479)),_N_E=e.O()}]);