(()=>{var e={};e.id=492,e.ids=[492],e.modules={369:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>l});var o=r(5853),s=r(554),n=r(708),i=r.n(n),a=r(8067),d={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);r.d(t,d);let l={children:["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,2192,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5347)),"/home/runner/workspace/nextjs-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,2192,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,2137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,8358,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=[],c={require:r,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},485:()=>{},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2050:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>o});let o=(0,r(413).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/workspace/nextjs-app/src/components/providers.tsx","Providers")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4352:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>i});var o=r(8625),s=r(7972),n=r(2647);let i=({...e})=>{let{theme:t="system"}=(0,s.D)();return(0,o.jsx)(n.l$,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})}},4388:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,O:()=>l});var o=r(8625),s=r(4996),n=r(1107);let i=(0,s.createContext)(void 0),a="postbook_token",d="postbook_user";function l({children:e}){let[t,r]=(0,s.useState)(null),[l,u]=(0,s.useState)(null),[c,p]=(0,s.useState)(!0),m=(0,n.useRouter)(),h=(0,s.useCallback)(async(e,t)=>{p(!0);try{let o=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrPhone:e,password:t})});if(!o.ok){let e=await o.json();throw Error(e.message||"Login failed")}let s=await o.json();u(s.token),r(s.user),localStorage.setItem(a,s.token),localStorage.setItem(d,JSON.stringify(s.user)),m.push("/feed")}finally{p(!1)}},[m]),f=(0,s.useCallback)(async e=>{p(!0);try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.message||"Registration failed")}let o=await t.json();u(o.token),r(o.user),localStorage.setItem(a,o.token),localStorage.setItem(d,JSON.stringify(o.user)),m.push("/feed")}finally{p(!1)}},[m]),v=(0,s.useCallback)(()=>{u(null),r(null),localStorage.removeItem(a),localStorage.removeItem(d),m.push("/")},[m]);return(0,o.jsx)(i.Provider,{value:{user:t,token:l,isLoading:c,isAuthenticated:!!l&&!!t,login:h,register:f,logout:v},children:e})}function u(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4766:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9782,23)),Promise.resolve().then(r.t.bind(r,3552,23)),Promise.resolve().then(r.t.bind(r,708,23)),Promise.resolve().then(r.t.bind(r,7319,23)),Promise.resolve().then(r.t.bind(r,2079,23)),Promise.resolve().then(r.t.bind(r,868,23)),Promise.resolve().then(r.t.bind(r,5543,23)),Promise.resolve().then(r.t.bind(r,2241,23))},5347:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>u});var o=r(7307),s=r(3475),n=r.n(s),i=r(2591),a=r.n(i);r(485);var d=r(9614),l=r(2050);let u={title:"PostBook - Connect & Share",description:"A social media platform to connect with friends and share your moments"};function c({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsxs)("body",{className:`${n().variable} ${a().variable} antialiased`,children:[(0,o.jsx)(l.Providers,{children:e}),(0,o.jsx)(d.Toaster,{})]})})}},6423:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>m});var o=r(8625),s=r(2888),n=r(8419),i=r(4996),a=r(45),d=r(7284);let l=a.Kq;a.bL,a.l9,i.forwardRef(({className:e,sideOffset:t=4,...r},s)=>(0,o.jsx)(a.ZL,{children:(0,o.jsx)(a.UC,{ref:s,sideOffset:t,className:(0,d.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r})})).displayName=a.UC.displayName;var u=r(4388),c=r(7313);let p=new s.E({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}});function m({children:e}){return(0,o.jsx)(n.Ht,{client:p,children:(0,o.jsx)(u.O,{children:(0,o.jsx)(l,{children:(0,o.jsx)(c.F,{children:e})})})})}},7284:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var o=r(9958),s=r(9802);function n(...e){return(0,s.QP)((0,o.$)(e))}},7313:(e,t,r)=>{"use strict";r.d(t,{$:()=>a,F:()=>i});var o=r(8625),s=r(4996);let n=(0,s.createContext)(void 0);function i({children:e}){let[t,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)([]);return(0,o.jsx)(n.Provider,{value:{isSidebarOpen:t,toggleSidebar:()=>r(e=>!e),closeSidebar:()=>r(!1),activeChats:i,openChat:e=>{i.find(t=>t.id===e.id)||a(t=>{let r=[...t,e];return r.length>2?r.slice(r.length-2):r})},closeChat:e=>{a(t=>t.filter(t=>t.id!==e))}},children:e})}function a(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useMessenger must be used within a MessengerProvider");return e}},7343:(e,t,r)=>{Promise.resolve().then(r.bind(r,2050)),Promise.resolve().then(r.bind(r,9614))},7591:(e,t,r)=>{Promise.resolve().then(r.bind(r,6423)),Promise.resolve().then(r.bind(r,4352))},7814:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8416,23)),Promise.resolve().then(r.t.bind(r,7342,23)),Promise.resolve().then(r.t.bind(r,4078,23)),Promise.resolve().then(r.t.bind(r,4193,23)),Promise.resolve().then(r.t.bind(r,1573,23)),Promise.resolve().then(r.t.bind(r,5405,23)),Promise.resolve().then(r.t.bind(r,7301,23)),Promise.resolve().then(r.t.bind(r,6159,23))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9614:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>o});let o=(0,r(413).registerClientReference)(function(){throw Error("Attempted to call Toaster() from the server but Toaster is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/workspace/nextjs-app/src/components/ui/sonner.tsx","Toaster")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[683,855],()=>r(369));module.exports=o})();